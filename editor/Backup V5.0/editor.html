<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tyniweb Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="editor.css" />
</head>
<body>

  <!-- TOP BAR -->
  <header id="tw-topbar">
    <div class="tw-topbar-left">
      <span class="tw-logo">Tyniweb</span>
      <span class="tw-topbar-divider">|</span>

      <!-- Role buttons (only one visible at a time) -->
      <button class="tw-role-btn" data-role="architect">Architect</button>
      <button class="tw-role-btn" data-role="member">Member</button>
      <button class="tw-role-btn" data-role="guest">Guest</button>
	  <button id="tw-preview-toggle" data-lock="creator" data-feature="Preview Mode">Preview</button>
	  <button id="tw-test-toggle" data-lock="architect" data-feature="Test Mode">Test</button>
    </div>

    <div class="tw-topbar-right">
      <!-- Training toggle -->
      <button id="tw-training-toggle">Training: OFF</button>

      <!-- Training Portal -->
      <button id="tw-training-portal-btn" style="display:none;">Training Portal</button>

      <!-- Publish / Export -->
      <button id="tw-publish-site" class="tw-primary">Publish</button>
      <button id="tw-export-site" class="tw-secondary">Export</button>

      <!-- Sign in/out -->
      <button id="tw-signin-btn">Sign in</button>
      <button id="tw-signout-btn" style="display:none;">Sign out</button>
    </div>
  </header>

  <!-- MAIN LAYOUT -->
  <div id="tw-layout">

    <!-- LEFT SIDEBAR -->
    <aside id="tw-sidebar-left">
      <section class="tw-panel">
        <h3>Pages</h3>
        <div id="tw-page-list"></div>
        <button id="tw-add-page" class="tw-secondary small">+ Add Page</button>
      </section>

      <section class="tw-panel">
        <h3>Components</h3>
        <div id="tw-components-panel" class="tw-component-list">
          <button class="tw-component-item" data-add-block="hero">Hero</button>
          <button class="tw-component-item" data-add-block="section">Section</button>
          <button class="tw-component-item" data-add-block="feature-row">Feature Row</button>
          <button class="tw-component-item" data-add-block="testimonial-row">Testimonials</button>
          <button class="tw-component-item" data-add-block="grid">Grid</button>
          <button class="tw-component-item" data-add-block="cta">CTA</button>
          <button class="tw-component-item" data-add-block="footer">Footer</button>
        </div>
      </section>

      <section class="tw-panel">
        <h3>AI Tools</h3>
        <button id="tw-ai-generate-content" class="tw-secondary small">AI: Content</button>
        <button id="tw-ai-layout" class="tw-secondary small">AI: Layout</button>
      </section>
	  
	  <button id="tw-open-block-picker" class="tw-secondary small">Add Block</button>
	  
    </aside>

    <!-- CANVAS -->
    <main id="tw-canvas">
      <div id="tw-canvas-body"></div>
    </main>

    <!-- RIGHT SIDEBAR -->
    <aside id="tw-sidebar-right">

      <section id="tw-inspector" class="tw-panel">
        <h3>Inspector</h3>
        <label>
          <span>Title</span>
          <input type="text" name="title" />
        </label>
        <label>
          <span>Subtitle</span>
          <textarea name="subtitle" rows="3"></textarea>
        </label>
        <label>
          <span>Button Label</span>
          <input type="text" name="cta" />
        </label>
      </section>

      <section id="tw-global-styles" class="tw-panel">
        <h3>Global Styles</h3>
        <label>
          <span>Theme</span>
          <select id="tw-theme-select"></select>
        </label>
        <label>
          <span>Font</span>
          <select name="global-font">
            <option value="system-ui">System</option>
            <option value="Inter, system-ui">Inter</option>
            <option value="Georgia, serif">Serif</option>
          </select>
        </label>
        <label>
          <span>Base Color</span>
          <input type="color" name="global-base-color" />
        </label>
        <label>
          <span>Accent Color</span>
          <input type="color" name="global-accent-color" />
        </label>
        <label>
          <span>Background</span>
          <input type="color" name="global-bg-color" />
        </label>
        <label>
          <span>Spacing</span>
          <input type="range" name="global-spacing" min="8" max="40" />
        </label>
      </section>

      <section id="tw-identity-panel" class="tw-panel">
        <h3>Identity Core</h3>
        <label>
          <span>Archetype</span>
          <select name="identity-archetype">
            <option value="guide">Guide</option>
            <option value="explorer">Explorer</option>
            <option value="visionary">Visionary</option>
            <option value="builder">Builder</option>
          </select>
        </label>
        <label>
          <span>Voice Tone</span>
          <input type="text" name="identity-voice" placeholder="warm and encouraging" />
        </label>
        <label>
          <span>Promise</span>
          <textarea name="identity-promise" rows="2" placeholder="Help you build worlds that feel alive."></textarea>
        </label>
        <button id="tw-new-portal-template" class="tw-secondary small">New Portal from Template</button>
      </section>

    </aside>
	
  <!-- TRAINING PORTAL -->
  <div id="tw-training-portal" class="tw-modal">
    <div class="tw-modal-content tw-training-modal">
      <div class="tw-modal-header">
        <h2>Training Portal</h2>
        <button id="tw-training-close" class="tw-icon-btn">✕</button>
      </div>

      <div class="tw-training-columns">
        <section>
          <h3>Architect Tracks</h3>
          <div id="tw-training-architect-list"></div>
        </section>
        <section>
          <h3>Member Tracks</h3>
          <div id="tw-training-member-list"></div>
        </section>
      </div>
    </div>
  </div>

  <!-- TRAINING CHECKLIST -->
  <aside id="tw-training-checklist" style="display:none;">
    <h3>Training Checklist</h3>
    <ul id="tw-training-checklist-list"></ul>
    <button id="tw-training-next-step" class="tw-secondary small">Next Step</button>
  </aside>

  <!-- TRAINING HUD -->
  <div id="tw-training-hud" style="display:none;">
    <div id="tw-training-hud-track"></div>
    <div id="tw-training-hud-step"></div>
    <div id="tw-training-hud-title"></div>
    <div id="tw-training-hud-progress">
      <div id="tw-training-hud-progress-bar"></div>
    </div>
  </div>

  <!-- TRAINING ARROW -->
  <div id="tw-training-arrow" style="display:none;">
    <div class="tw-training-arrow-icon">➤</div>
  </div>

  <!-- ROLE OVERLAY -->
  <div id="tw-role-overlay">
    <div class="tw-role-overlay-inner">
      <h2>Choose your role</h2>
      <p>Select how you want to enter Tyniweb.</p>
      <div class="tw-role-overlay-buttons">
        <button onclick="chooseRole('architect')">Architect</button>
        <button onclick="chooseRole('member')">Member</button>
        <button onclick="chooseRole('guest')">Continue as Guest</button>
      </div>
    </div>
  </div>

  <!-- ============================
       Tyniweb V4 Testing Dashboard
       ============================ -->
  <div id="tw-test-dashboard" class="tw-test-dashboard" style="display:none;">
    <div class="tw-test-header">
      <strong>Tyniweb V4 — Test Dashboard</strong>
      <button id="tw-test-close">✕</button>
    </div>

    <div class="tw-test-section">
      <h4>Subsystem Status</h4>
      <ul id="tw-test-status-list"></ul>
    </div>

    <div class="tw-test-section">
      <h4>Event Log</h4>
      <div id="tw-test-log"></div>
    </div>

    <div class="tw-test-actions">
      <button id="tw-test-run" class="tw-primary small">Run Full Test Suite</button>
      <button id="tw-test-reset" class="tw-secondary small">Reset</button>
    </div>
  </div>

  <!-- Floating button to open dashboard -->
  <button id="tw-test-open" class="tw-test-open-btn">QA</button>


<!-- SOFT-LOCK MODAL -->
<div id="tw-softlock-overlay" style="display:none;">
  <div id="tw-softlock-modal">
    <h3 id="tw-softlock-title"></h3>
    <p id="tw-softlock-message"></p>
    <div class="tw-softlock-actions">
      <a href="pricing.html" class="tw-softlock-btn tw-softlock-primary">View Pricing</a>
      <button id="tw-softlock-close" class="tw-softlock-btn tw-softlock-secondary">Close</button>
    </div>
  </div>
</div>

<!-- MEMBERSHIP BADGE -->
<div id="tw-role-badge">
  <span id="tw-role-label"></span>
</div>
<!-- EDITOR MODE BADGE -->
<div id="tw-mode-badge">
  <span id="tw-mode-label"></span>
</div>


<!-- ROLE SWITCHER (Architect only) -->
<div id="tw-role-switcher" style="display:none;">
  <button data-role="guest">Switch to Guest</button>
  <button data-role="member">Switch to Member</button>
  <button data-role="architect">Return to Architect</button>
</div>

<!-- SETTINGS / CONTROL CENTER BUTTON -->
<button id="tw-open-settings"
        class="tw-secondary small"
        style="position:fixed; bottom:90px; left:20px; z-index:4000;">
  Settings
</button>

<!-- UNIFIED SETTINGS PANEL (480px Slide‑Over) -->
<div id="tw-settings-panel"
     style="
       position: fixed;
       top: 0;
       right: 0;
       width: 480px;
       max-width: 100%;
       height: 100%;
       background: rgba(20,22,28,0.98);
       border-left: 1px solid rgba(255,255,255,0.12);
       z-index: 5000;
       padding: 20px;
       color: #fff;
       display: none;
       overflow-y: auto;
       box-shadow: -4px 0 24px rgba(0,0,0,0.6);
     ">

  <!-- HEADER -->
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
    <h2 style="margin:0;">Control Center</h2>
    <button id="tw-settings-close"
            style="background:none; border:none; color:#aaa; font-size:20px; cursor:pointer;">
      ✕
    </button>
  </div>

  <!-- TABS -->
  <div class="tw-settings-tabs" style="display:flex; gap:6px; margin-bottom:16px;">
    <button data-tab="general" class="active"
            style="flex:1; border-radius:999px; border:1px solid rgba(255,255,255,0.12);
                   background:#4f46e5; color:#fff; padding:6px 10px; font-size:12px; cursor:pointer;">
      General
    </button>

    <button data-tab="extensions"
            style="flex:1; border-radius:999px; border:1px solid rgba(255,255,255,0.12);
                   background:rgba(10,12,18,0.9); color:#fff; padding:6px 10px; font-size:12px; cursor:pointer;">
      Extensions
    </button>

    <button data-tab="github"
            style="flex:1; border-radius:999px; border:1px solid rgba(255,255,255,0.12);
                   background:rgba(10,12,18,0.9); color:#fff; padding:6px 10px; font-size:12px; cursor:pointer;">
      GitHub
    </button>

    <button data-tab="membership"
            style="flex:1; border-radius:999px; border:1px solid rgba(255,255,255,0.12);
                   background:rgba(10,12,18,0.9); color:#fff; padding:6px 10px; font-size:12px; cursor:pointer;">
      Membership
    </button>

    <button data-tab="editor"
            style="flex:1; border-radius:999px; border:1px solid rgba(255,255,255,0.12);
                   background:rgba(10,12,18,0.9); color:#fff; padding:6px 10px; font-size:12px; cursor:pointer;">
      Editor
    </button>
  </div>

  <!-- TAB: GENERAL -->
  <div class="tw-settings-tab-content" data-tab="general">
    <label>
      <span>Site Title</span>
      <input type="text" id="tw-setting-title"
             style="width:100%; padding:8px; border-radius:6px;
                    background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <label>
      <span>Site Description</span>
      <textarea id="tw-setting-description" rows="3"
                style="width:100%; padding:8px; border-radius:6px;
                       background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;"></textarea>
    </label>
  </div>

  <!-- TAB: EXTENSIONS -->
  <div class="tw-settings-tab-content" data-tab="extensions" style="display:none;">
    <p class="tw-settings-note" style="opacity:0.7; font-size:12px;">
      Toggle platform extensions on or off.
    </p>
    <div id="tw-extensions-list"></div>
  </div>

  <!-- TAB: GITHUB -->
  <div class="tw-settings-tab-content" data-tab="github" style="display:none;">
    <p class="tw-settings-note" style="opacity:0.7; font-size:12px;">
      GitHub sync (design stub): configure repo and simulate push/pull.
    </p>

    <label>
      <span>Repository URL</span>
      <input type="text" id="tw-github-repo"
             placeholder="https://github.com/user/repo"
             style="width:100%; padding:8px; border-radius:6px;
                    background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <button id="tw-github-push" class="tw-secondary small" style="width:100%; margin-top:6px;">Simulate Push</button>
    <button id="tw-github-pull" class="tw-secondary small" style="width:100%; margin-top:6px;">Simulate Pull</button>
  </div>

  <!-- TAB: MEMBERSHIP -->
  <div class="tw-settings-tab-content" data-tab="membership" style="display:none;">
    <p class="tw-settings-note" style="opacity:0.7; font-size:12px;">
      Configure membership tiers.
    </p>

    <label>
      <span>Free Tier Name</span>
      <input type="text" id="tw-tier-free-name" style="width:100%; padding:8px; border-radius:6px;
             background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <label>
      <span>Creator Tier Name</span>
      <input type="text" id="tw-tier-creator-name" style="width:100%; padding:8px; border-radius:6px;
             background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <label>
      <span>Architect Tier Name</span>
      <input type="text" id="tw-tier-architect-name" style="width:100%; padding:8px; border-radius:6px;
             background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <label>
      <span>Creator Price (per month)</span>
      <input type="text" id="tw-tier-creator-price" style="width:100%; padding:8px; border-radius:6px;
             background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <label>
      <span>Architect Price (per month)</span>
      <input type="text" id="tw-tier-architect-price" style="width:100%; padding:8px; border-radius:6px;
             background:rgba(10,12,18,0.9); border:1px solid rgba(255,255,255,0.12); color:#fff;">
    </label>

    <button id="tw-membership-preview" class="tw-secondary small" style="width:100%; margin-top:10px;">
      Preview Pricing Layout
    </button>
  </div>

  <!-- TAB: EDITOR FLAGS -->
  <div class="tw-settings-tab-content" data-tab="editor" style="display:none;">
    <label style="display:flex; align-items:center; gap:8px;">
      <input type="checkbox" id="tw-toggle-debug">
      Show Debug HUD
    </label>

    <label style="display:flex; align-items:center; gap:8px;">
      <input type="checkbox" id="tw-toggle-autotest">
      Auto‑Start Auto‑Tester
    </label>
  </div>

  <!-- SAVE BUTTON -->
  <button id="tw-settings-save"
          class="tw-primary small"
          style="width:100%; margin-top:20px;">
    Save Settings
  </button>

</div>

<!-- EXTENSION DETAILS PANEL -->
<div id="tw-extension-details"
     style="
       position: fixed;
       top: 0;
       right: 0;
       width: 360px;
       max-width: 100%;
       height: 100%;
       background: rgba(20,22,28,0.98);
       border-left: 1px solid rgba(255,255,255,0.12);
       z-index: 6000;
       padding: 20px;
       color: #fff;
       display: none;
       overflow-y: auto;
       box-shadow: -4px 0 24px rgba(0,0,0,0.6);
     ">
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
    <h2 id="tw-ext-title" style="margin:0;"></h2>
    <button id="tw-ext-close"
            style="background:none; border:none; color:#aaa; font-size:20px; cursor:pointer;">
      ✕
    </button>
  </div>

  <p id="tw-ext-description" style="opacity:0.8; font-size:13px;"></p>

  <div style="margin-top:20px;">
    <strong>Category:</strong>
    <div id="tw-ext-category" style="opacity:0.8; margin-bottom:10px;"></div>

    <strong>Version:</strong>
    <div id="tw-ext-version" style="opacity:0.8; margin-bottom:10px;"></div>

    <strong>Author:</strong>
    <div id="tw-ext-author" style="opacity:0.8; margin-bottom:10px;"></div>

    <strong>Dependencies:</strong>
    <div id="tw-ext-deps" style="opacity:0.8; margin-bottom:10px;"></div>
  </div>

  <button id="tw-ext-toggle" class="tw-primary small" style="width:100%; margin-top:20px;">
    Toggle Extension
  </button>

  <button id="tw-ext-run-tests" class="tw-secondary small" style="width:100%; margin-top:10px; display:none;">
    Run Tests
  </button>

  <button id="tw-ext-open-panel" class="tw-secondary small" style="width:100%; margin-top:10px; display:none;">
    Open Panel
  </button>
</div>

<!-- COMMAND PALETTE -->
<div id="tw-command-palette"
     style="
       position: fixed;
       top: 20%;
       left: 50%;
       transform: translateX(-50%);
       width: 480px;
       max-width: 90%;
       background: rgba(20,22,28,0.98);
       border: 1px solid rgba(255,255,255,0.12);
       border-radius: 8px;
       padding: 16px;
       z-index: 7000;
       display: none;
       color: #fff;
       box-shadow: 0 8px 32px rgba(0,0,0,0.4);
     ">
  <input id="tw-command-input"
         placeholder="Type a command..."
         style="
           width: 100%;
           padding: 10px;
           border-radius: 6px;
           background: rgba(10,12,18,0.9);
           border: 1px solid rgba(255,255,255,0.12);
           color: #fff;
           margin-bottom: 10px;
         ">

  <div id="tw-command-list" style="max-height: 240px; overflow-y: auto;"></div>
</div>

<!-- SLASH MENU -->
<div id="tw-slash-menu"
     style="
       position: absolute;
       background: rgba(20,22,28,0.98);
       border: 1px solid rgba(255,255,255,0.12);
       border-radius: 8px;
       padding: 8px;
       z-index: 8000;
       display: none;
       color: #fff;
       width: 260px;
       box-shadow: 0 8px 32px rgba(0,0,0,0.4);
     ">
  <div id="tw-slash-list" style="max-height: 240px; overflow-y: auto;"></div>
</div>

<!-- BLOCK PICKER PANEL -->
<div id="tw-block-picker"
     style="
       position: fixed;
       top: 0;
       left: 0;
       width: 360px;
       height: 100%;
       background: rgba(20,22,28,0.98);
       border-right: 1px solid rgba(255,255,255,0.12);
       z-index: 6500;
       padding: 20px;
       color: #fff;
       display: none;
       overflow-y: auto;
       box-shadow: 4px 0 24px rgba(0,0,0,0.6);
     ">
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
    <h2 style="margin:0;">Add Block</h2>
    <button id="tw-block-picker-close"
            style="background:none; border:none; color:#aaa; font-size:20px; cursor:pointer;">
      ✕
    </button>
  </div>

  <input id="tw-block-search"
         placeholder="Search blocks..."
         style="
           width: 100%;
           padding: 10px;
           border-radius: 6px;
           background: rgba(10,12,18,0.9);
           border: 1px solid rgba(255,255,255,0.12);
           color: #fff;
           margin-bottom: 16px;
         ">

  <div id="tw-block-list"></div>
</div>



  <div id="tw-test-overlay"></div>

<script src="editor.js" defer></script>
</body>
</html>
